# üîó –ù–ê–°–¢–†–û–ô–ö–ê –†–ï–ê–õ–¨–ù–´–• –°–ï–†–í–ò–°–û–í

## üéØ –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –° NOTION –ò TELEGRAM

### 1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Notion Integration**

#### 1.1 –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
1. **–ü–µ—Ä–µ–π–¥–∏ –Ω–∞:** https://www.notion.so/my-integrations
2. **–ù–∞–∂–º–∏:** "New integration"
3. **–ó–∞–ø–æ–ª–Ω–∏:**
   - Name: `Quick Voice Assistant`
   - Associated workspace: –≤—ã–±–µ—Ä–∏ —Å–≤–æ–π workspace
   - Capabilities: Read content, Update content, Insert content
4. **–°–∫–æ–ø–∏—Ä—É–π:** Internal Integration Token

#### 1.2 –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
–°–æ–∑–¥–∞–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞:

**Tasks (–ó–∞–¥–∞—á–∏):**
```
Name: Tasks
Properties:
- Name (Title) - –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
- Status (Select) - To Do, In Progress, Done
- Priority (Select) - Low, Medium, High
- Created (Date) - –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- Tags (Multi-select) - —Ç–µ–≥–∏
```

**Reflections (–†–µ—Ñ–ª–µ–∫—Å–∏–∏):**
```
Name: Reflections
Properties:
- Name (Title) - –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏
- Content (Text) - —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
- Mood (Select) - Happy, Neutral, Sad, Stressed
- Date (Date) - –¥–∞—Ç–∞
- Type (Select) - voice, manual, ai
```

**Habits (–ü—Ä–∏–≤—ã—á–∫–∏):**
```
Name: Habits
Properties:
- Name (Title) - –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–≤—ã—á–∫–∏
- Status (Select) - Active, Paused, Completed
- Frequency (Select) - Daily, Weekly, Monthly
- Streak (Number) - —Ç–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è
- Created (Date) - –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
```

#### 1.3 –ü–æ–ª—É—á–µ–Ω–∏–µ Database IDs
1. **–û—Ç–∫—Ä–æ–π –∫–∞–∂–¥—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö**
2. **–°–∫–æ–ø–∏—Ä—É–π ID –∏–∑ URL:**
   ```
   https://notion.so/workspace/DATABASE_ID?v=...
   ```
3. **–î–æ–±–∞–≤—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –∫ –∫–∞–∂–¥–æ–π –±–∞–∑–µ:**
   - –ù–∞–∂–º–∏ "Share" –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
   - –î–æ–±–∞–≤—å —Å–æ–∑–¥–∞–Ω–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
   - –î–∞–π –ø—Ä–∞–≤–∞ "Can edit"

### 2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot**

#### 2.1 –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞
1. **–ù–∞–π–¥–∏ @BotFather –≤ Telegram**
2. **–û—Ç–ø—Ä–∞–≤—å –∫–æ–º–∞–Ω–¥—É:** `/newbot`
3. **–°–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º:**
   - Bot name: `Quick Voice Assistant`
   - Username: `your_voice_assistant_bot`
4. **–°–∫–æ–ø–∏—Ä—É–π —Ç–æ–∫–µ–Ω:** `1234567890:ABCdefGHIjklMNOpqrsTUVwxyz`

#### 2.2 –ü–æ–ª—É—á–µ–Ω–∏–µ Chat ID
1. **–ù–∞–π–¥–∏ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –±–æ—Ç–∞ –≤ Telegram**
2. **–û—Ç–ø—Ä–∞–≤—å –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ**
3. **–ü–µ—Ä–µ–π–¥–∏ –ø–æ —Å—Å—ã–ª–∫–µ:**
   ```
   https://api.telegram.org/bot<YOUR_TOKEN>/getUpdates
   ```
4. **–ù–∞–π–¥–∏ –≤ –æ—Ç–≤–µ—Ç–µ:**
   ```json
   "chat": {
     "id": 123456789,
     "type": "private"
   }
   ```
5. **–°–∫–æ–ø–∏—Ä—É–π ID** (—ç—Ç–æ —á–∏—Å–ª–æ)

### 3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**

#### 3.1 –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ .env
```bash
nano .env
```

–ó–∞–º–µ–Ω–∏ –∑–Ω–∞—á–µ–Ω–∏—è:
```env
# Notion
NOTION_TOKEN=secret_your_actual_notion_token_here
NOTION_TASKS_DB=your_tasks_database_id
NOTION_REFLECTIONS_DB=your_reflections_database_id
NOTION_HABITS_DB=your_habits_database_id

# Telegram
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_CHAT_ID=123456789
```

#### 3.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
python -c "
import os
from dotenv import load_dotenv
load_dotenv()
print('Notion Token:', '‚úÖ' if os.getenv('NOTION_TOKEN') else '‚ùå')
print('Telegram Token:', '‚úÖ' if os.getenv('TELEGRAM_BOT_TOKEN') else '‚ùå')
print('Chat ID:', '‚úÖ' if os.getenv('TELEGRAM_CHAT_ID') else '‚ùå')
"
```

### 4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π**

#### 4.1 –¢–µ—Å—Ç Notion
```bash
python -c "
import asyncio
import sys
sys.path.append('integration')
from notion_integration import NotionIntegration
import os
from dotenv import load_dotenv

load_dotenv()

async def test():
    notion = NotionIntegration(
        token=os.getenv('NOTION_TOKEN'),
        databases={'tasks': os.getenv('NOTION_TASKS_DB')}
    )
    await notion.initialize()
    result = await notion.create_task('–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–¥–∞—á–∞')
    print('Notion test:', '‚úÖ' if result else '‚ùå')

asyncio.run(test())
"
```

#### 4.2 –¢–µ—Å—Ç Telegram
```bash
python -c "
import asyncio
import sys
sys.path.append('integration')
from telegram_integration import TelegramIntegration
import os
from dotenv import load_dotenv

load_dotenv()

async def test():
    telegram = TelegramIntegration(
        bot_token=os.getenv('TELEGRAM_BOT_TOKEN'),
        chat_id=os.getenv('TELEGRAM_CHAT_ID')
    )
    await telegram.initialize()
    result = await telegram.send_message('üß™ –¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç Quick Voice Assistant')
    print('Telegram test:', '‚úÖ' if result else '‚ùå')

asyncio.run(test())
"
```

### 5. **–ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã**

#### 5.1 –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
python start_quick_voice_assistant.py
```

#### 5.2 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
```bash
# –í –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
python scripts/test_system.py
```

#### 5.3 –¢–µ—Å—Ç –≥–æ–ª–æ—Å–æ–≤–æ–π –∫–æ–º–∞–Ω–¥—ã
```bash
curl -X POST http://localhost:8000/watch/voice \
  -H "Content-Type: application/json" \
  -d '{
    "query": "–¥–æ–±–∞–≤—å –∑–∞–¥–∞—á—É –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏",
    "context": "test",
    "timestamp": 1234567890,
    "user_id": "test_user"
  }'
```

### 6. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤**

#### 6.1 Notion
- –û—Ç–∫—Ä–æ–π –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö Tasks
- –ù–∞–π–¥–∏ —Å–æ–∑–¥–∞–Ω–Ω—É—é –∑–∞–¥–∞—á—É "–ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏"

#### 6.2 Telegram
- –ü—Ä–æ–≤–µ—Ä—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –±–æ—Ç–∞
- –î–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Å–æ–∑–¥–∞–Ω–Ω–æ–π –∑–∞–¥–∞—á–µ

#### 6.3 –ß–∞—Å—ã
- –£—Å—Ç–∞–Ω–æ–≤–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —á–∞—Å—ã
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –≥–æ–ª–æ—Å–æ–≤—É—é –∫–æ–º–∞–Ω–¥—É
- –ü—Ä–æ–≤–µ—Ä—å –æ—Ç–≤–µ—Ç –Ω–∞ —ç–∫—Ä–∞–Ω–µ

### 7. **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫**

#### 7.1 Notion –æ—à–∏–±–∫–∏
- **401 Unauthorized:** –ø—Ä–æ–≤–µ—Ä—å —Ç–æ–∫–µ–Ω –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- **404 Not Found:** –ø—Ä–æ–≤–µ—Ä—å Database ID
- **403 Forbidden:** –¥–æ–±–∞–≤—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

#### 7.2 Telegram –æ—à–∏–±–∫–∏
- **401 Unauthorized:** –ø—Ä–æ–≤–µ—Ä—å —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
- **400 Bad Request:** –ø—Ä–æ–≤–µ—Ä—å Chat ID
- **403 Forbidden:** —É–±–µ–¥–∏—Å—å, —á—Ç–æ –±–æ—Ç –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω

#### 7.3 –°–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏
- **Connection refused:** –ø—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
- **Timeout:** –ø—Ä–æ–≤–µ—Ä—å —Å–∫–æ—Ä–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- **DNS error:** –ø—Ä–æ–≤–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–æ–≤

### 8. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏**

#### 8.1 –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
# –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
tail -f logs/server.log

# –õ–æ–≥–∏ –æ—à–∏–±–æ–∫
tail -f logs/error.log

# –õ–æ–≥ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
tail -f deployment_log.jsonl
```

#### 8.2 –ú–µ—Ç—Ä–∏–∫–∏
```bash
# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞
curl http://localhost:8000/health

# –ú–µ—Ç—Ä–∏–∫–∏
curl http://localhost:8000/metrics
```

---

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É —Ç–µ–±—è –±—É–¥–µ—Ç:

‚úÖ **–†–∞–±–æ—Ç–∞—é—â–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Notion** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á/—Ä–µ—Ñ–ª–µ–∫—Å–∏–π/–ø—Ä–∏–≤—ã—á–µ–∫  
‚úÖ **–†–∞–±–æ—Ç–∞—é—â–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∫–∞–∂–¥–æ–º –¥–µ–π—Å—Ç–≤–∏–∏  
‚úÖ **–ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã  
‚úÖ **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é** - —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏  

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ 