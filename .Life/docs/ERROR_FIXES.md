# ERROR LOG: Почему не обновляются базы Notion

## Кратко
- Скрипт реально запускался и работал.
- Логирование работало (stdout + файл).
- Соединение с Notion и базами есть (базы видны, ID корректные).
- Ошибка: `Cannot create new title property.`
- Для большинства баз не прописаны схемы (NO_SCHEMA).

## Причины ошибок

### 1. Ошибка `Cannot create new title property.`
- Notion API не позволяет создавать второй title property в базе.
- Если в базе уже есть поле title (например, "Название" или "Name"), нельзя добавить ещё одно поле типа title через API.
- Скрипт пытался добавить поле 'goal_name' (title), 'idea' (title), 'entry' (title) — это вызвало ошибку.
- Нужно использовать уже существующее поле title, а не создавать новое.

### 2. NO_SCHEMA для остальных баз
- В SCHEMAS не прописаны схемы для большинства баз (rituals, habits, reflection, guides, tasks, terms, materials, agent_prompts, ideas, experience_hub).
- Скрипт пропускает эти базы, ничего не меняет.

## Что делать для исправления

1. **Использовать существующее поле title**
   - Не создавать новое поле типа title через API.
   - В SCHEMAS указывать имя существующего поля title (например, "Название" или "Name"), а не "goal_name", "idea" и т.д.
   - Пример:
     ```python
     'properties': {
         'Name': {'title': {}},
         ...
     }
     'sample': {
         'Name': {'title': [{'text': {'content': 'Прокачать английский до B2'}}]},
         ...
     }
     ```

2. **Прописать схемы для всех баз**
   - Для каждой базы явно указать все нужные поля в SCHEMAS.
   - Не пытаться создавать поля, которые уже есть (особенно title).

3. **Проверить имена полей в Notion**
   - Названия полей должны совпадать с теми, что реально есть в базе (регистр, язык, пробелы).
   - Лучше сначала выгрузить структуру базы через API или вручную посмотреть в Notion.

4. **Перезапустить скрипт после исправлений**
   - После корректировки SCHEMAS и имён полей — снова запустить скрипт.

## Итог
- Скрипт реально запускался, соединение с Notion есть.
- Ошибка — попытка создать второй title property.
- Для большинства баз не прописаны схемы, поэтому ничего не менялось.
- Для исправления: использовать существующее поле title, прописать схемы для всех баз, проверить имена полей.

---

**Этот лог — для истории и анализа причин букса.** 