#!/usr/bin/env python3
"""
Ğ”ĞµĞ¼Ğ¾Ğ½ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ ÑƒĞ¿Ñ€Ğ¾Ñ‰ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞ°
ĞœĞ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾ Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº LLM Ğ¸ Ğ±Ğ°Ğ·Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
"""

import asyncio
import time
from datetime import datetime

class QuickVoiceDemo:
    """Ğ”ĞµĞ¼Ğ¾Ğ½ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°"""
    
    def __init__(self):
        self.current_state = "ready"
        self.last_query = None
        self.query_history = []
        
    def show_screen(self, state, message=""):
        """ĞŸĞ¾ĞºĞ°Ğ· ÑĞºÑ€Ğ°Ğ½Ğ° Ñ‡Ğ°ÑĞ¾Ğ²"""
        screens = {
            "ready": f"""
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ğŸ¤ Ğ“Ğ¾Ñ‚Ğ¾Ğ²            â”‚
â”‚                         â”‚
â”‚   ĞŸĞ¾Ğ´Ğ½Ğ¸Ğ¼Ğ¸ Ñ€ÑƒĞºÑƒ          â”‚
â”‚   Ğ¸ Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸              â”‚
â”‚                         â”‚
â”‚   [â—] [ĞœĞµĞ½Ñ]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜""",
            
            "recording": f"""
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ğŸ”´ Ğ—Ğ°Ğ¿Ğ¸ÑÑŒ           â”‚
â”‚                         â”‚
â”‚   â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆ        â”‚
â”‚   â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆ        â”‚
â”‚                         â”‚
â”‚   [â—] [Ğ¡Ñ‚Ğ¾Ğ¿]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜""",
            
            "processing": f"""
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ğŸ”„ ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°        â”‚
â”‚                         â”‚
â”‚   ĞĞ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒÑ...         â”‚
â”‚                         â”‚
â”‚   [â—] [ĞÑ‚Ğ¼ĞµĞ½Ğ°]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜""",
            
            "response": f"""
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾           â”‚
â”‚                         â”‚
â”‚   {message:<23} â”‚
â”‚                         â”‚
â”‚   [ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€] [ĞĞ¾Ğ²Ğ¾Ğµ]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"""
        }
        
        print(f"\nğŸ“± Ğ¡ĞĞ¡Ğ¢ĞĞ¯ĞĞ˜Ğ•: {state.upper()}")
        print(screens.get(state, "ĞĞµĞ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ"))
    
    def simulate_wake_up(self):
        """Ğ¡Ğ¸Ğ¼ÑƒĞ»ÑÑ†Ğ¸Ñ Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¶Ğ´ĞµĞ½Ğ¸Ñ ÑĞºÑ€Ğ°Ğ½Ğ°"""
        print("\nğŸ”„ ĞŸĞ ĞĞ‘Ğ£Ğ–Ğ”Ğ•ĞĞ˜Ğ• Ğ­ĞšĞ ĞĞĞ")
        print("ğŸ‘† ĞŸĞ¾Ğ´Ğ½Ğ¸Ğ¼Ğ°ĞµÑˆÑŒ Ñ€ÑƒĞºÑƒ â†’ ÑĞºÑ€Ğ°Ğ½ Ğ²ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ÑÑ")
        
        self.current_state = "ready"
        self.show_screen("ready")
        
        # ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· 1 ÑĞµĞºÑƒĞ½Ğ´Ñƒ
        print("â±ï¸ Ğ§ĞµÑ€ĞµĞ· 1 ÑĞµĞºÑƒĞ½Ğ´Ñƒ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ³Ğ¾Ñ‚Ğ¾Ğ² Ğº Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸...")
        time.sleep(1)
        
        return self.start_recording()
    
    def start_recording(self):
        """ĞĞ°Ñ‡Ğ°Ğ»Ğ¾ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸"""
        print("\nğŸ¤ ĞĞĞ§ĞĞ›Ğ Ğ—ĞĞŸĞ˜Ğ¡Ğ˜")
        self.current_state = "recording"
        self.show_screen("recording")
        
        # Ğ¡Ğ¸Ğ¼ÑƒĞ»ÑÑ†Ğ¸Ñ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸
        print("ğŸ™ï¸ Ğ—Ğ°Ğ¿Ğ¸ÑÑŒ Ğ³Ğ¾Ğ»Ğ¾ÑĞ°...")
        time.sleep(2)
        
        # ĞœĞ¾ĞºĞ¾Ğ²Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹
        commands = [
            "Ğ´Ğ¾Ğ±Ğ°Ğ²ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ Ğ¼ĞµĞ´Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ",
            "Ğ·Ğ°Ğ¿Ğ¸ÑˆĞ¸ Ğ¼Ñ‹ÑĞ»ÑŒ Ğ¾ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğµ",
            "Ğ¿Ğ¾ĞºĞ°Ğ¶Ğ¸ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ",
            "ÑĞ¾Ğ·Ğ´Ğ°Ğ¹ Ğ¿Ñ€Ğ¸Ğ²Ñ‹Ñ‡ĞºÑƒ Ñ‡Ñ‚ĞµĞ½Ğ¸Ğµ",
            "ĞºĞ°Ğº Ğ¼Ğ¾Ğµ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµ",
            "Ñ‡Ñ‚Ğ¾ Ğ¼Ğ½Ğµ Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ"
        ]
        
        command = commands[len(self.query_history) % len(commands)]
        print(f"ğŸ“ Ğ Ğ°ÑĞ¿Ğ¾Ğ·Ğ½Ğ°Ğ½Ğ¾: '{command}'")
        
        return self.process_query(command)
    
    def process_query(self, query):
        """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°"""
        print(f"\nğŸ§  ĞĞ‘Ğ ĞĞ‘ĞĞ¢ĞšĞ: '{query}'")
        
        self.current_state = "processing"
        self.show_screen("processing")
        
        # Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµĞ¼ Ğ² Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ
        self.query_history.append({
            "query": query,
            "timestamp": datetime.now()
        })
        self.last_query = query
        
        # Ğ¡Ğ¸Ğ¼ÑƒĞ»ÑÑ†Ğ¸Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ LLM
        print("ğŸ”„ ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ² LLM...")
        time.sleep(1)
        print("ğŸ§  ĞĞ½Ğ°Ğ»Ğ¸Ğ· ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ°...")
        time.sleep(1)
        print("ğŸ“Š ĞŸĞ¾Ğ¸ÑĞº Ğ² Ğ±Ğ°Ğ·Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…...")
        time.sleep(1)
        
        # ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ¾Ñ‚Ğ²ĞµÑ‚
        response = self.get_llm_response(query)
        
        return self.show_response(response)
    
    def get_llm_response(self, query):
        """ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° Ğ¾Ñ‚ LLM"""
        responses = {
            "Ğ´Ğ¾Ğ±Ğ°Ğ²ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ Ğ¼ĞµĞ´Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ": {
                "short": "Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ°",
                "full": "Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° 'ĞœĞµĞ´Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ' Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ° Ğ² Ğ²Ğ°Ñˆ ÑĞ¿Ğ¸ÑĞ¾Ğº. Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒÑ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ ÑƒÑ‚Ñ€Ğ¾Ğ¼ Ğ¸Ğ»Ğ¸ Ğ²ĞµÑ‡ĞµÑ€Ğ¾Ğ¼ Ğ´Ğ»Ñ Ğ»ÑƒÑ‡ÑˆĞµĞ³Ğ¾ ÑÑ„Ñ„ĞµĞºÑ‚Ğ°.",
                "action": "add_task",
                "data": {"task": "ĞœĞµĞ´Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ", "category": "wellness"}
            },
            "Ğ·Ğ°Ğ¿Ğ¸ÑˆĞ¸ Ğ¼Ñ‹ÑĞ»ÑŒ Ğ¾ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğµ": {
                "short": "ĞœÑ‹ÑĞ»ÑŒ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ°",
                "full": "ĞœÑ‹ÑĞ»ÑŒ Ğ¾ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ° Ğ² reflections. Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒÑ Ğ²ĞµÑ€Ğ½ÑƒÑ‚ÑŒÑÑ Ğº Ğ½ĞµĞ¹ Ñ‡ĞµÑ€ĞµĞ· Ğ½ĞµĞ´ĞµĞ»Ñ Ğ´Ğ»Ñ Ğ¾Ñ†ĞµĞ½ĞºĞ¸.",
                "action": "save_thought",
                "data": {"content": "Ğ¼Ñ‹ÑĞ»ÑŒ Ğ¾ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğµ", "type": "reflection"}
            },
            "Ğ¿Ğ¾ĞºĞ°Ğ¶Ğ¸ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ": {
                "short": "ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ Ğ³Ğ¾Ñ‚Ğ¾Ğ²",
                "full": "Ğ’Ğ°Ñˆ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ: 85% ÑˆĞ°Ğ³Ğ¾Ğ², 90% ĞºĞ°Ğ»Ğ¾Ñ€Ğ¸Ğ¹, 7/10 Ğ¿Ñ€Ğ¸Ğ²Ñ‹Ñ‡ĞµĞº Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¾. ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹!",
                "action": "show_progress",
                "data": {"steps": 85, "calories": 90, "habits": 7}
            },
            "ÑĞ¾Ğ·Ğ´Ğ°Ğ¹ Ğ¿Ñ€Ğ¸Ğ²Ñ‹Ñ‡ĞºÑƒ Ñ‡Ñ‚ĞµĞ½Ğ¸Ğµ": {
                "short": "ĞŸÑ€Ğ¸Ğ²Ñ‹Ñ‡ĞºĞ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ°",
                "full": "ĞŸÑ€Ğ¸Ğ²Ñ‹Ñ‡ĞºĞ° 'Ğ§Ñ‚ĞµĞ½Ğ¸Ğµ' ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ°. Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒÑ 30 Ğ¼Ğ¸Ğ½ÑƒÑ‚ Ğ² Ğ´ĞµĞ½ÑŒ Ğ¿ĞµÑ€ĞµĞ´ ÑĞ½Ğ¾Ğ¼.",
                "action": "create_habit",
                "data": {"habit": "Ğ§Ñ‚ĞµĞ½Ğ¸Ğµ", "duration": "30 Ğ¼Ğ¸Ğ½ÑƒÑ‚"}
            },
            "ĞºĞ°Ğº Ğ¼Ğ¾Ğµ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµ": {
                "short": "Ğ—Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµ Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ½Ğ¾Ğµ",
                "full": "Ğ’Ğ°ÑˆĞµ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµ Ğ² Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ½Ğ¾Ğ¼ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğ¸! ĞŸÑƒĞ»ÑŒÑ 75 ÑƒĞ´/Ğ¼Ğ¸Ğ½, ÑÑ‚Ñ€ĞµÑÑ 30%. Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒÑ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ñ€Ğ¸Ñ‚Ğ¼.",
                "action": "health_check",
                "data": {"heart_rate": 75, "stress": 30}
            },
            "Ñ‡Ñ‚Ğ¾ Ğ¼Ğ½Ğµ Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ": {
                "short": "Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹",
                "full": "Ğ£Ñ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°Ñ Ğ²Ğ°ÑˆĞ¸ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ĞµĞ»Ğ¸, Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒÑ: 1) Ğ’ĞµÑ‡ĞµÑ€Ğ½ÑÑ Ğ¿Ñ€Ğ¾Ğ³ÑƒĞ»ĞºÑƒ 2) ĞœĞµĞ´Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ 3) ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ°ÑˆĞ½ĞµĞ³Ğ¾ Ğ´Ğ½Ñ",
                "action": "recommendations",
                "data": {"activities": ["Ğ¿Ñ€Ğ¾Ğ³ÑƒĞ»ĞºĞ°", "Ğ¼ĞµĞ´Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ", "Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ"]}
            }
        }
        
        return responses.get(query, {
            "short": "ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ½Ğ¾",
            "full": "Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ½. Ğ§Ñ‚Ğ¾ ĞµÑ‰Ğµ Ğ¼Ğ¾Ğ³Ñƒ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‡ÑŒ?",
            "action": "general",
            "data": {}
        })
    
    def show_response(self, response):
        """ĞŸĞ¾ĞºĞ°Ğ· Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°"""
        print(f"\nâœ… ĞĞ¢Ğ’Ğ•Ğ¢: {response['short']}")
        
        self.current_state = "response"
        self.show_screen("response", response['short'])
        
        # ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚Ğ²ĞµÑ‚
        print(f"\nğŸ¤– ĞŸĞĞ›ĞĞ«Ğ™ ĞĞ¢Ğ’Ğ•Ğ¢:")
        print(f"   {response['full']}")
        
        # ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ
        if response['action'] != 'general':
            print(f"\nâš¡ Ğ’Ğ«ĞŸĞĞ›ĞĞ•ĞĞ Ğ”Ğ•Ğ™Ğ¡Ğ¢Ğ’Ğ˜Ğ•: {response['action']}")
            print(f"   Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ: {response['data']}")
        
        # ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ² Telegram
        print(f"\nğŸ“± ĞĞ¢ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ Ğ’ TELEGRAM:")
        print(f"   {response['full']}")
        
        return response
    
    def repeat_last_query(self):
        """ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ĞµĞ³Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°"""
        if self.last_query:
            print(f"\nğŸ”„ ĞŸĞĞ’Ğ¢ĞĞ : '{self.last_query}'")
            return self.process_query(self.last_query)
        else:
            print("\nâŒ ĞĞµÑ‚ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ĞµĞ³Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°")
            return None
    
    def show_quick_menu(self):
        """ĞŸĞ¾ĞºĞ°Ğ· Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ¼ĞµĞ½Ñ"""
        print("\nâš¡ Ğ‘Ğ«Ğ¡Ğ¢Ğ ĞĞ• ĞœĞ•ĞĞ®:")
        print("  ğŸ¤ - ĞĞ¾Ğ²Ğ°Ñ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ")
        print("  ğŸ”„ - ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ĞµĞµ")
        print("  ğŸ“Š - ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ")
        print("  âš™ï¸ - ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸")
        print("  ğŸ“ - Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²")
    
    def show_history(self):
        """ĞŸĞ¾ĞºĞ°Ğ· Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²"""
        print(f"\nğŸ“ Ğ˜Ğ¡Ğ¢ĞĞ Ğ˜Ğ¯ Ğ—ĞĞŸĞ ĞĞ¡ĞĞ’ ({len(self.query_history)}):")
        for i, item in enumerate(self.query_history[-5:], 1):
            time_str = item['timestamp'].strftime("%H:%M")
            print(f"  {i}. [{time_str}] {item['query']}")
    
    def simulate_full_workflow(self):
        """Ğ¡Ğ¸Ğ¼ÑƒĞ»ÑÑ†Ğ¸Ñ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ³Ğ¾ Ñ€Ğ°Ğ±Ğ¾Ñ‡ĞµĞ³Ğ¾ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ°"""
        print("ğŸš€ Ğ”Ğ•ĞœĞĞĞ¡Ğ¢Ğ ĞĞ¦Ğ˜Ğ¯ Ğ‘Ğ«Ğ¡Ğ¢Ğ ĞĞ“Ğ Ğ“ĞĞ›ĞĞ¡ĞĞ’ĞĞ“Ğ Ğ”ĞĞ¡Ğ¢Ğ£ĞŸĞ")
        print("=" * 50)
        print("ğŸ¯ Ğ¦ĞµĞ»ÑŒ: Ğ¼Ğ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾ Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº LLM Ğ¸ Ğ±Ğ°Ğ·Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…")
        print("=" * 50)
        
        # Ğ¡Ğ¸Ğ¼ÑƒĞ»ÑÑ†Ğ¸Ñ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¸Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
        workflows = [
            "ĞŸÑ€Ğ¾Ğ±ÑƒĞ¶Ğ´ĞµĞ½Ğ¸Ğµ ÑĞºÑ€Ğ°Ğ½Ğ° â†’ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ â†’ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° â†’ Ğ¾Ñ‚Ğ²ĞµÑ‚",
            "Ğ–ĞµÑÑ‚ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ğ¸ â†’ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ â†’ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° â†’ Ğ¾Ñ‚Ğ²ĞµÑ‚", 
            "ĞšĞ»ÑÑ‡ĞµĞ²Ğ¾Ğµ ÑĞ»Ğ¾Ğ²Ğ¾ â†’ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ â†’ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° â†’ Ğ¾Ñ‚Ğ²ĞµÑ‚"
        ]
        
        for i, workflow in enumerate(workflows, 1):
            print(f"\n{i}. ğŸ”„ {workflow}")
            print("-" * 40)
            
            if i == 1:
                # ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ
                self.simulate_wake_up()
            elif i == 2:
                # Ğ–ĞµÑÑ‚ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ğ¸
                print("\nğŸ‘† Ğ–ĞµÑÑ‚ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ğ¸ (Ğ²ÑÑ‚Ñ€ÑÑ…Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ)")
                self.start_recording()
            else:
                # ĞšĞ»ÑÑ‡ĞµĞ²Ğ¾Ğµ ÑĞ»Ğ¾Ğ²Ğ¾
                print("\nğŸ¤ ĞšĞ»ÑÑ‡ĞµĞ²Ğ¾Ğµ ÑĞ»Ğ¾Ğ²Ğ¾ 'Ğ°ÑÑĞ¸ÑÑ‚ĞµĞ½Ñ‚'")
                self.start_recording()
            
            time.sleep(2)
        
        # ĞŸĞ¾ĞºĞ°Ğ· Ğ¼ĞµĞ½Ñ Ğ¸ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸
        print("\n" + "=" * 50)
        print("ğŸ“± Ğ”ĞĞŸĞĞ›ĞĞ˜Ğ¢Ğ•Ğ›Ğ¬ĞĞ«Ğ• Ğ¤Ğ£ĞĞšĞ¦Ğ˜Ğ˜")
        print("=" * 50)
        
        self.show_quick_menu()
        self.show_history()
        
        # ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ĞµĞ³Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°
        print("\nğŸ”„ Ğ”Ğ•ĞœĞĞĞ¡Ğ¢Ğ ĞĞ¦Ğ˜Ğ¯ ĞŸĞĞ’Ğ¢ĞĞ Ğ:")
        self.repeat_last_query()
        
        print("\nâœ… Ğ”Ğ•ĞœĞĞĞ¡Ğ¢Ğ ĞĞ¦Ğ˜Ğ¯ Ğ—ĞĞ’Ğ•Ğ Ğ¨Ğ•ĞĞ!")
        print("ğŸ¤ Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ° Ğº Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ!")
        print("âš¡ ĞœĞ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾ Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº LLM Ğ¸ Ğ±Ğ°Ğ·Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…!")

async def main():
    """Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ"""
    demo = QuickVoiceDemo()
    demo.simulate_full_workflow()

if __name__ == "__main__":
    asyncio.run(main()) 