import os
from notion_client import Client

def explain_kpi_auto_calculation():
    """Explain how to set up automatic calculation for KPI metrics"""
    
    print("üßÆ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –†–ê–°–ß–ï–¢ KPI –ú–ï–¢–†–ò–ö")
    print("=" * 60)
    
    print("üéØ –†–ï–®–ï–ù–ò–ï: –°–í–Ø–ó–¨ + ROLLUP + FORMULA")
    print("\nüìä –°–¢–†–£–ö–¢–£–†–ê KPI –ë–ê–ó–´ –° –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ú –†–ê–°–ß–ï–¢–û–ú:")
    
    kpi_fields = {
        "–ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏": "title",
        "–ö–∞—Ç–µ–≥–æ—Ä–∏—è": "select (–ü–æ–ª–∏–≥—Ä–∞—Ñ–∏—è, –ö–æ–Ω—Ç–µ–Ω—Ç, –î–∏–∑–∞–π–Ω)",
        "–ö–æ–º–∞–Ω–¥–∞": "select (–î–∏–∑–∞–π–Ω-–∫–æ–º–∞–Ω–¥–∞, –ö–æ–Ω—Ç–µ–Ω—Ç-–∫–æ–º–∞–Ω–¥–∞)",
        "–¢–∏–ø –º–µ—Ç—Ä–∏–∫–∏": "select (–ö–∞—á–µ—Å—Ç–≤–æ, –°–∫–æ—Ä–æ—Å—Ç—å, –û–±—ä–µ–º)",
        "–°–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏": "relation ‚Üí TASKS (—Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É)",
        "–í—Å–µ–≥–æ –∑–∞–¥–∞—á": "rollup ‚Üí count(–°–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏)", 
        "–ó–∞–¥–∞—á–∏ –≤ —Å—Ä–æ–∫": "rollup ‚Üí count_if(–°–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏, –î–∞—Ç–∞ <= –î–µ–¥–ª–∞–π–Ω)",
        "–ó–∞–¥–∞—á–∏ –±–µ–∑ –ø—Ä–∞–≤–æ–∫": "rollup ‚Üí count_if(–°–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏, –ü—Ä–∞–≤–∫–∏ = 0)",
        "–û–±—â–µ–µ –≤—Ä–µ–º—è": "rollup ‚Üí sum(–°–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏, –§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è)",
        "–†–ï–ó–£–õ–¨–¢–ê–¢": "formula ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç",
        "–¶–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ": "number",
        "–°—Ç–∞—Ç—É—Å": "formula ‚Üí —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Ü–µ–ª—å—é"
    }
    
    for field_name, field_type in kpi_fields.items():
        print(f"   ‚Ä¢ {field_name}: {field_type}")
    
    print(f"\nüîç –ö–û–ù–ö–†–ï–¢–ù–´–ï –ü–†–ò–ú–ï–†–´ –§–û–†–ú–£–õ:")
    
    examples = [
        {
            "name": "% –∑–∞–¥–∞—á –ø–æ–ª–∏–≥—Ä–∞—Ñ–∏–∏ –≤ —Å—Ä–æ–∫",
            "relation_filter": "–¢–∏–ø —Ä–∞–±–æ—Ç—ã = –ü–æ–ª–∏–≥—Ä–∞—Ñ–∏—è",
            "formula": 'round(prop("–ó–∞–¥–∞—á–∏ –≤ —Å—Ä–æ–∫") / prop("–í—Å–µ–≥–æ –∑–∞–¥–∞—á") * 100)',
            "result": "85% (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)"
        },
        {
            "name": "–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –Ω–∞ –ª–∏—Å—Ç–æ–≤–∫—É", 
            "relation_filter": "–¢–∏–ø —Ä–∞–±–æ—Ç—ã = –ü–æ–ª–∏–≥—Ä–∞—Ñ–∏—è AND –®–∞–±–ª–æ–Ω = –õ–∏—Å—Ç–æ–≤–∫–∞",
            "formula": 'round(prop("–û–±—â–µ–µ –≤—Ä–µ–º—è") / prop("–í—Å–µ–≥–æ –∑–∞–¥–∞—á"), 1)',
            "result": "2.5 —á–∞—Å–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)"
        },
        {
            "name": "–°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∞–≤–æ–∫ –Ω–∞ –±–∞–Ω–Ω–µ—Ä",
            "relation_filter": "–¢–∏–ø —Ä–∞–±–æ—Ç—ã = –ü–æ–ª–∏–≥—Ä–∞—Ñ–∏—è AND –®–∞–±–ª–æ–Ω = –ë–∞–Ω–Ω–µ—Ä", 
            "formula": 'round(prop("–û–±—â–∏–µ –ø—Ä–∞–≤–∫–∏") / prop("–í—Å–µ–≥–æ –∑–∞–¥–∞—á"), 1)',
            "result": "1.2 –ø—Ä–∞–≤–∫–∏ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)"
        }
    ]
    
    for i, example in enumerate(examples, 1):
        print(f"\n{i}. {example['name']}:")
        print(f"   üîó –§–∏–ª—å—Ç—Ä –∑–∞–¥–∞—á: {example['relation_filter']}")
        print(f"   üßÆ –§–æ—Ä–º—É–ª–∞: {example['formula']}")
        print(f"   üìä –†–µ–∑—É–ª—å—Ç–∞—Ç: {example['result']}")
    
    print(f"\nüõ†Ô∏è –ö–ê–ö –ù–ê–°–¢–†–û–ò–¢–¨:")
    
    setup_steps = [
        "–°–æ–∑–¥–∞—Ç—å relation –ø–æ–ª–µ '–°–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏' ‚Üí TASKS",
        "–î–ª—è –∫–∞–∂–¥–æ–π KPI –∑–∞–ø–∏—Å–∏ —É–∫–∞–∑–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á",
        "–°–æ–∑–¥–∞—Ç—å rollup –ø–æ–ª—è –∏–∑ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á:",
        "  - –í—Å–µ–≥–æ –∑–∞–¥–∞—á (count)",
        "  - –ó–∞–¥–∞—á–∏ –≤ —Å—Ä–æ–∫ (count with condition)",
        "  - –û–±—â–µ–µ –≤—Ä–µ–º—è (sum)",
        "–°–æ–∑–¥–∞—Ç—å formula –ø–æ–ª–µ '–†–ï–ó–£–õ–¨–¢–ê–¢' —Å —Ä–∞—Å—á–µ—Ç–æ–º",
        "–°–æ–∑–¥–∞—Ç—å formula –ø–æ–ª–µ '–°—Ç–∞—Ç—É—Å' –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å —Ü–µ–ª—å—é"
    ]
    
    for i, step in enumerate(setup_steps, 1):
        print(f"{i}. {step}")
    
    print(f"\nüí° –í–ê–ñ–ù–ê–Ø –§–ò–®–ö–ê - –§–ò–õ–¨–¢–†–ê–¶–ò–Ø RELATION:")
    print("   –ö–∞–∂–¥–∞—è KPI –∑–∞–ø–∏—Å—å —Å–≤—è–∑–∞–Ω–∞ —Ç–æ–ª—å–∫–æ —Å –ù–£–ñ–ù–´–ú–ò –∑–∞–¥–∞—á–∞–º–∏:")
    print("   ‚Ä¢ '–ü–æ–ª–∏–≥—Ä–∞—Ñ–∏—è –∫–∞—á–µ—Å—Ç–≤–æ' ‚Üí —Ç–æ–ª—å–∫–æ –ø–æ–ª–∏–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏")
    print("   ‚Ä¢ '–õ–∏—Å—Ç–æ–≤–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç—å' ‚Üí —Ç–æ–ª—å–∫–æ –∑–∞–¥–∞—á–∏ —Å —à–∞–±–ª–æ–Ω–æ–º '–õ–∏—Å—Ç–æ–≤–∫–∞'")
    print("   ‚Ä¢ '–ö–æ–º–∞–Ω–¥–∞ X —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å' ‚Üí —Ç–æ–ª—å–∫–æ –∑–∞–¥–∞—á–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è X")
    
    print(f"\nüìà –†–ï–ó–£–õ–¨–¢–ê–¢:")
    advantages = [
        "–í—Å–µ –º–µ—Ç—Ä–∏–∫–∏ —Å—á–∏—Ç–∞—é—Ç—Å—è –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò",
        "–î–æ–±–∞–≤–∏–ª –∑–∞–¥–∞—á—É ‚Üí KPI –æ–±–Ω–æ–≤–∏–ª—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ", 
        "–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ª—é–±—ã–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º",
        "–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –¥–æ –ª—é–±–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –º–µ—Ç—Ä–∏–∫",
        "RDT –ø–æ–ª—É—á–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ rollup"
    ]
    
    for adv in advantages:
        print(f"   ‚úÖ {adv}")
    
    print(f"\nüéØ –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ü–û–¢–û–ö–ê –î–ê–ù–ù–´–•:")
    print("   TASKS (–∑–∞–¥–∞—á–∏) ‚Üí KPI (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏) ‚Üí RDT (dashboard)")
    print("   –í—Å–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è —Å–∞–º–æ, –Ω–∏—á–µ–≥–æ —Ä—É–∫–∞–º–∏ –Ω–µ –≤–≤–æ–¥–∏–º!")
    
    print(f"\n‚ö†Ô∏è –û–î–ò–ù –ù–Æ–ê–ù–°:")
    print("   Relation —Ñ–∏–ª—å—Ç—Ä—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é –≤ Notion UI")
    print("   –ù–æ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ KPI –º–µ—Ç—Ä–∏–∫–∏")

if __name__ == "__main__":
    explain_kpi_auto_calculation() 