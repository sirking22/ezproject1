# üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MCP Notion Server

## ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞

MCP —Å–µ—Ä–≤–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω. –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å Notion API —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

## üìã –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

1. **–ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω venv** - —á–∏—Å—Ç–æ–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
2. **–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** - notion-client, python-telegram-bot, requests, python-dotenv
3. **–°–æ–∑–¥–∞–Ω MCP —Å–µ—Ä–≤–µ—Ä** - `mcp_notion_server.py` —Å –ø–æ–ª–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º
4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ** - –≤—Å–µ 5 –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–Ω—ã

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```
‚úÖ –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ: –ï—â–µ —Ç–µ—Å—Ç
üìä –î–æ—Å—Ç—É–ø–Ω–æ 5 –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö:
- ideas (ad92a6e21485428c84de8587706b3be1)
- subtasks (9c5f4269d61449b6a7485579a3c21da3)  
- materials (1d9ace03d9ff804191a4d35aeedcbbd4)
- projects (342f18c67a5e41fead73dcec00770f4e)
- kpi (1d6ace03d9ff80bfb809ed21dfd2150c)
```

## üîë –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤

### 1. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
```bash
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–∑ env_template.txt
cp env_template.txt .env
```

### 2. –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã:
```env
NOTION_TOKEN=ntn_–≤–∞—à_—Ä–µ–∞–ª—å–Ω—ã–π_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å
TELEGRAM_TOKEN=–≤–∞—à_telegram_—Ç–æ–∫–µ–Ω
YA_TOKEN=–≤–∞—à_yandex_—Ç–æ–∫–µ–Ω
DEEPSEEK_API_KEY=–≤–∞—à_deepseek_–∫–ª—é—á
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ MCP —Å–µ—Ä–≤–µ—Ä–∞

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
```bash
# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å venv
.\venv\Scripts\activate

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç
python mcp_notion_server.py
```

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á –ø–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é:
```python
# –ß–µ—Ä–µ–∑ MCP —Å–µ—Ä–≤–µ—Ä
server = NotionMCPServer()
tasks = await server.get_database_pages(server.tasks_db_id)

# –§–∏–ª—å—Ç—Ä –ø–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é
designer_tasks = [
    task for task in tasks['pages'] 
    if '–£—á–∞—Å—Ç–Ω–∏–∫–∏' in task['properties'] 
    and any('–¥–∏–∑–∞–π–Ω–µ—Ä' in str(p).lower() for p in task['properties']['–£—á–∞—Å—Ç–Ω–∏–∫–∏'])
]
```

## üìä –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ MCP —Å–µ—Ä–≤–µ—Ä–∞

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|--------|
| `get_database_pages()` | –ü–æ–ª—É—á–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–∑ –ë–î | –í—Å–µ –∑–∞–¥–∞—á–∏ –¥–∏–∑–∞–π–Ω–µ—Ä–æ–≤ |
| `search_notion()` | –ü–æ–∏—Å–∫ –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É | –ù–∞–π—Ç–∏ –∑–∞–¥–∞—á–∏ –ø–æ —Ç–µ–∫—Å—Ç—É |
| `create_page()` | –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É | –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É |
| `update_page()` | –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É | –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å |
| `delete_page()` | –£–¥–∞–ª–∏—Ç—å (–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å) | –ó–∞–∫—Ä—ã—Ç—å –∑–∞–¥–∞—á—É |
| `get_databases()` | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ë–î | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å |

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Cursor

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ mcp.json –≤ Cursor:
```json
{
  "mcpServers": {
    "notion-mcp-server": {
      "command": "python",
      "args": ["mcp_notion_server.py"],
      "cwd": "Z:\\Files\\VS_code"
    }
  }
}
```

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã** –≤ .env
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é** –∑–∞–¥–∞—á –ø–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é
3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é** –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–¥–∞—á
4. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –¥–∞—à–±–æ—Ä–¥–æ–º** —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –¥–∏–∑–∞–π–Ω–µ—Ä–æ–≤

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞ "NOTION_TOKEN –Ω–µ –Ω–∞–π–¥–µ–Ω":
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª .env
ls -la .env
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
python -c "import os; from dotenv import load_dotenv; load_dotenv(); print(os.getenv('NOTION_TOKEN'))"
```

### –û—à–∏–±–∫–∞ "HTTP 401":
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–∫–µ–Ω Notion
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ integration –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫ –±–∞–∑–∞–º –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### –û—à–∏–±–∫–∞ "Database not found":
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å ID –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –±–∞–∑—ã –Ω–µ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω—ã
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –±–∞–∑–∞–º

## ‚úÖ –°—Ç–∞—Ç—É—Å: –ì–û–¢–û–í –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

MCP —Å–µ—Ä–≤–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ. –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. 