import { defineIntegration } from '@sentry/core';
import { anrIntegration as anrIntegration$1 } from '@sentry/node';
import { app, powerMonitor } from 'electron';
import { ELECTRON_MAJOR_VERSION } from '../electron-normalize.js';

/**
 * Starts a worker thread to detect App Not Responding (ANR) events
 */
const anrIntegration = defineIntegration((options = {}) => {
    if (ELECTRON_MAJOR_VERSION < 22) {
        throw new Error('Main process ANR detection requires Electron v22+');
    }
    const integration = anrIntegration$1({
        ...options,
        staticTags: {
            'event.environment': 'javascript',
            'event.origin': 'electron',
            'event.process': 'browser',
            ...options.staticTags,
        },
        appRootPath: app.getAppPath(),
    });
    powerMonitor.on('suspend', () => {
        integration.stopWorker();
    });
    powerMonitor.on('resume', () => {
        integration.startWorker();
    });
    return integration;
});

export { anrIntegration };//# sourceMappingURL=http://go/sourcemap/sourcemaps/5b19bac7a947f54e4caa3eb7e4c5fbf832389850/node_modules/@sentry/electron/esm/main/integrations/anr.js.map
